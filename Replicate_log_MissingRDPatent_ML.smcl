{smcl}
{com}{sf}{ul off}{txt}{.-}
      name:  {res}<unnamed>
       {txt}log:  {res}F:\Dropbox\RD_PATENT_FE\MissingRDPatent_ML\Replicate_log_MissingRDPatent_ML.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}19 Jun 2022, 15:15:31
{txt}
{com}. 
. * Load the sample of 200 firms. 
. * Remark: the PERMCO here is psuedo numbers for illustration purpose. 
. use "F:\Dropbox\RD_PATENT_FE\MissingRDPatent_ML\Replicate_data_MissingRDPatent_ML.dta"
{txt}(Written by R.              )

{com}. 
.                 
. ********************************************************************************************************************
. * Linear model: POLS, HDFE, ost-regularization LASSO regression and double machine learning LASSO regression 
. ********************************************************************************************************************
. 
. *--------------------------------------------------------------------------------------------------
. * Table 1: R&D-Innovation literature overview
.   *No data involved
. 
. *--------------------------------------------------------------------------------------------------
. * Table 2: Summary statistics and correlation
. 
.         * Define variables of interests (please change accordingly)
.         local innov_used "lnnpatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx  InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         estimates clear
{txt}
{com}. 
.         tabstat `innov_used' `rd_used' `ctrl_w', statistics(mean, sd, min, p25, p50, p75,  max)

{txt}   Stats {...}
{c |}{...}
  lnnpat~t      RDAT      lnME  RD_mis~g     lnAge     lnK2L    TobinQ       ROA  Leverage    CASHAT     KZidx   InstOwn  oms_HH~x  oms_HH~e
{hline 9}{c +}{hline 140}
{ralign 8:Mean} {...}
{c |}{...}
 {res} 1.127338  .1707743  11.87475  .3284248  2.716782  9.943034  1.826282  .1201123  .1966685  .1321084 -3.749596  .2930266   .754716  .6022806
{txt}{ralign 8:SD} {...}
{c |}{...}
 {res} 1.471394  .2882722  2.200005  .4697451  .7592728  .9763734  1.621378  .1663764  .1520928  .1650624  9.162018  .2501981  .1808288  .2177695
{txt}{ralign 8:Min} {...}
{c |}{...}
 {res}        0         0  7.436645         0  .6931472  7.623864  .5786658 -.9076982         0  .0006894 -74.38193         0  .0028718  8.25e-06
{txt}{ralign 8:p25} {...}
{c |}{...}
 {res}        0         0   10.2972         0  2.079442  9.347881   .970277  .0915313  .0633127  .0219098 -4.657218  .0325758  .7158444  .5124332
{txt}{ralign 8:p50} {...}
{c |}{...}
 {res} .6931472  .0668006  11.69294         0  2.833213  9.930756  1.301163  .1487129  .1880532  .0664516 -1.584226  .2696149  .7872009  .6196853
{txt}{ralign 8:p75} {...}
{c |}{...}
 {res} 1.791759  .2252642   13.3006         1  3.367296  10.48792  1.990957  .2054806  .2948932  .1770051  .3368723  .5113156  .8755112  .7665198
{txt}{ralign 8:Max} {...}
{c |}{...}
 {res} 6.059123   2.15309  17.02938         1   3.89182  13.09049  13.79558   .388014  .6646083  .9016927   5.99608  .8375683  .9882751  .9766877
{txt}{hline 9}{c BT}{hline 140}

{com}.         corr `innov_used' `rd_used' `ctrl_w'
{txt}(obs=2,241)

             {c |} lnnpat~t     RDAT     lnME RD_mis~g    lnAge    lnK2L   TobinQ      ROA Leverage   CASHAT    KZidx  InstOwn oms_HH~x oms_HH~e
{hline 13}{c +}{hline 126}
   lnnpatent {c |}{res}   1.0000
        {txt}RDAT {c |}{res}   0.1485   1.0000
        {txt}lnME {c |}{res}   0.5933  -0.0445   1.0000
  {txt}RD_missing {c |}{res}  -0.3228  -0.4104  -0.0787   1.0000
       {txt}lnAge {c |}{res}   0.4059  -0.1281   0.4971   0.0111   1.0000
       {txt}lnK2L {c |}{res}   0.2300   0.0052   0.5137   0.0641   0.1508   1.0000
      {txt}TobinQ {c |}{res}   0.1604   0.3441   0.2796  -0.1917  -0.1718   0.0880   1.0000
         {txt}ROA {c |}{res}   0.1808  -0.5434   0.3047   0.0660   0.2600  -0.0446  -0.1525   1.0000
    {txt}Leverage {c |}{res}  -0.0933  -0.2001  -0.0624   0.1602   0.1201   0.1448  -0.2570  -0.0737   1.0000
      {txt}CASHAT {c |}{res}  -0.0727   0.3651  -0.0805  -0.1843  -0.3598  -0.0207   0.3896  -0.3740  -0.4193   1.0000
       {txt}KZidx {c |}{res}  -0.0206  -0.0524  -0.0520   0.0717   0.1170   0.1843  -0.2306  -0.0870   0.3342  -0.4078   1.0000
     {txt}InstOwn {c |}{res}   0.3025  -0.0130   0.6727   0.0148   0.3866   0.4571   0.1550   0.1826  -0.0892  -0.0637  -0.0162   1.0000
   {txt}oms_HHidx {c |}{res}  -0.0508   0.0904   0.0043  -0.0250  -0.1389   0.0386   0.1391  -0.1157  -0.0188   0.1576  -0.0652  -0.0664   1.0000
{txt}oms_HHidx_~e {c |}{res}  -0.0467   0.1171   0.0079  -0.0398  -0.1754   0.0382   0.1673  -0.1277  -0.0249   0.1881  -0.0884  -0.0676   0.9712   1.0000

{txt}
{com}. 
. *--------------------------------------------------------------------------------------------------
. * Table 3--8: OLS and Fixed effect estimation 
. 
.         * Define variables of interests (please change accordingly)
.         local innov_used "lnnpatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx  InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         estimates clear
{txt}
{com}.         
.         * OLS
.         reg `innov_used' `rd_used' `ctrl_w', vce(cluster PERMCO)

{txt}Linear regression                               Number of obs     = {res}     2,241
                                                {txt}F(13, 199)        =  {res}     8.57
                                                {txt}Prob > F          = {res}    0.0000
                                                {txt}R-squared         = {res}    0.4821
                                                {txt}Root MSE          =    {res}  1.062

{txt}{ralign 82:(Std. err. adjusted for {res:200} clusters in {res:PERMCO})}
{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 18}{c |}{col 30}    Robust
{col 1}       lnnpatent{col 18}{c |} Coefficient{col 30}  std. err.{col 42}      t{col 50}   P>|t|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}RDAT {c |}{col 18}{res}{space 2} .7796862{col 30}{space 2}  .286386{col 41}{space 1}    2.72{col 50}{space 3}0.007{col 58}{space 4} .2149455{col 71}{space 3} 1.344427
{txt}{space 12}lnME {c |}{col 18}{res}{space 2} .4080139{col 30}{space 2} .0659799{col 41}{space 1}    6.18{col 50}{space 3}0.000{col 58}{space 4} .2779044{col 71}{space 3} .5381234
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2}-.6998355{col 30}{space 2} .1374954{col 41}{space 1}   -5.09{col 50}{space 3}0.000{col 58}{space 4}-.9709705{col 71}{space 3}-.4287005
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .3003587{col 30}{space 2} .0985492{col 41}{space 1}    3.05{col 50}{space 3}0.003{col 58}{space 4}  .106024{col 71}{space 3} .4946934
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2} .0020954{col 30}{space 2} .0813391{col 41}{space 1}    0.03{col 50}{space 3}0.979{col 58}{space 4}-.1583017{col 71}{space 3} .1624925
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2}-.0250098{col 30}{space 2} .0486694{col 41}{space 1}   -0.51{col 50}{space 3}0.608{col 58}{space 4}-.1209838{col 71}{space 3} .0709641
{txt}{space 13}ROA {c |}{col 18}{res}{space 2} .4299965{col 30}{space 2} .4265131{col 41}{space 1}    1.01{col 50}{space 3}0.315{col 58}{space 4}-.4110688{col 71}{space 3} 1.271062
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2}-.5344797{col 30}{space 2} .3651855{col 41}{space 1}   -1.46{col 50}{space 3}0.145{col 58}{space 4} -1.25461{col 71}{space 3} .1856503
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2} -.566604{col 30}{space 2} .3289487{col 41}{space 1}   -1.72{col 50}{space 3}0.087{col 58}{space 4}-1.215277{col 71}{space 3} .0820686
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2} .0003406{col 30}{space 2}  .004836{col 41}{space 1}    0.07{col 50}{space 3}0.944{col 58}{space 4}-.0091958{col 71}{space 3} .0098769
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2}-1.055768{col 30}{space 2}  .407618{col 41}{space 1}   -2.59{col 50}{space 3}0.010{col 58}{space 4}-1.859573{col 71}{space 3}-.2519628
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}-.5930747{col 30}{space 2} 1.169875{col 41}{space 1}   -0.51{col 50}{space 3}0.613{col 58}{space 4}-2.900017{col 71}{space 3} 1.713868
{txt}oms_HHidx_square {c |}{col 18}{res}{space 2} .1965955{col 30}{space 2} 1.091642{col 41}{space 1}    0.18{col 50}{space 3}0.857{col 58}{space 4}-1.956076{col 71}{space 3} 2.349267
{txt}{space 11}_cons {c |}{col 18}{res}{space 2}-3.644037{col 30}{space 2} 1.066115{col 41}{space 1}   -3.42{col 50}{space 3}0.001{col 58}{space 4} -5.74637{col 71}{space 3}-1.541704
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}{txt}
{com}.         estimates store OLS
{txt}
{com}.         estadd local FirmFE "no"

{txt}added macro:
             e(FirmFE) : "{res:no}"

{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"

{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"

{com}. 
.         * Fixed Effect on firm, firm and year, firm and industry-trend(yearxindustry)
.     reghdfe `innov_used' `rd_used' `ctrl_w' , absorb(i.PERMCO) vce(cluster PERMCO)
{res}{txt}(dropped 9 {browse "http://scorreia.com/research/singletons.pdf":singleton observations})
{res}{txt}({browse "http://scorreia.com/research/hdfe.pdf":MWFE estimator} converged in 1 iterations)
{res}
{txt}HDFE Linear regression{col 51}Number of obs{col 67}= {res}     2,232
{txt}Absorbing 1 HDFE group{col 51}F({res}  13{txt},{res}    190{txt}){col 67}= {res}      1.97
{txt}Statistics robust to heteroskedasticity{col 51}Prob > F{col 67}= {res}    0.0253
{txt}{col 51}R-squared{col 67}= {res}    0.8578
{txt}{col 51}Adj R-squared{col 67}= {res}    0.8435
{txt}{col 51}Within R-sq.{col 67}= {res}    0.0533
{txt}{col 1}Number of clusters ({res}PERMCO{txt}) {col 30}= {res}       191{txt}{col 51}Root MSE{col 67}= {res}    0.5821

{txt}{ralign 82:(Std. err. adjusted for {res:191} clusters in {res:PERMCO})}
{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 18}{c |}{col 30}    Robust
{col 1}       lnnpatent{col 18}{c |} Coefficient{col 30}  std. err.{col 42}      t{col 50}   P>|t|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}RDAT {c |}{col 18}{res}{space 2}-.1359002{col 30}{space 2} .1222373{col 41}{space 1}   -1.11{col 50}{space 3}0.268{col 58}{space 4}-.3770168{col 71}{space 3} .1052164
{txt}{space 12}lnME {c |}{col 18}{res}{space 2} .1638618{col 30}{space 2} .0460149{col 41}{space 1}    3.56{col 50}{space 3}0.000{col 58}{space 4} .0730961{col 71}{space 3} .2546274
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2} -.047374{col 30}{space 2} .1031978{col 41}{space 1}   -0.46{col 50}{space 3}0.647{col 58}{space 4}-.2509346{col 71}{space 3} .1561866
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .0258291{col 30}{space 2} .0750778{col 41}{space 1}    0.34{col 50}{space 3}0.731{col 58}{space 4} -.122264{col 71}{space 3} .1739223
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2}-.0295681{col 30}{space 2} .0602373{col 41}{space 1}   -0.49{col 50}{space 3}0.624{col 58}{space 4}-.1483879{col 71}{space 3} .0892517
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2}-.0021996{col 30}{space 2} .0305019{col 41}{space 1}   -0.07{col 50}{space 3}0.943{col 58}{space 4}-.0623654{col 71}{space 3} .0579662
{txt}{space 13}ROA {c |}{col 18}{res}{space 2}-.1329556{col 30}{space 2} .2065505{col 41}{space 1}   -0.64{col 50}{space 3}0.521{col 58}{space 4}-.5403824{col 71}{space 3} .2744711
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2}-.1236639{col 30}{space 2} .2110927{col 41}{space 1}   -0.59{col 50}{space 3}0.559{col 58}{space 4}-.5400502{col 71}{space 3} .2927223
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2}-.1776333{col 30}{space 2} .2338412{col 41}{space 1}   -0.76{col 50}{space 3}0.448{col 58}{space 4}-.6388916{col 71}{space 3}  .283625
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2} .0016546{col 30}{space 2} .0023872{col 41}{space 1}    0.69{col 50}{space 3}0.489{col 58}{space 4}-.0030543{col 71}{space 3} .0063635
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2}-.1873683{col 30}{space 2} .1622352{col 41}{space 1}   -1.15{col 50}{space 3}0.250{col 58}{space 4}-.5073817{col 71}{space 3} .1326452
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}-1.316904{col 30}{space 2} .6393337{col 41}{space 1}   -2.06{col 50}{space 3}0.041{col 58}{space 4}-2.578007{col 71}{space 3}-.0558001
{txt}oms_HHidx_square {c |}{col 18}{res}{space 2} 1.145595{col 30}{space 2} .4446894{col 41}{space 1}    2.58{col 50}{space 3}0.011{col 58}{space 4}  .268433{col 71}{space 3} 2.022758
{txt}{space 11}_cons {c |}{col 18}{res}{space 2} -.124826{col 30}{space 2}  .642298{col 41}{space 1}   -0.19{col 50}{space 3}0.846{col 58}{space 4}-1.391777{col 71}{space 3} 1.142125
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 13}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text} Absorbed FE{col 14}{c |} Categories{col 27} - Redundant{col 39}  = Num. Coefs{col 54}{c |}
{res}{col 1}{text}{hline 13}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}      PERMCO{col 14}{c |}{space 1}      191{col 27}{space 1}      191{col 39}{result}{space 1}        0{col 53}{text}*{col 54}{c |}
{res}{col 1}{text}{hline 13}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
* = FE nested within cluster; treated as redundant for DoF computation
{res}{txt}
{com}.         estimates store OLSFE_firm
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"

{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"

{com}.         
.         reghdfe `innov_used' `rd_used' `ctrl_w' , absorb(i.PERMCO i.fyear) vce(cluster PERMCO)
{res}{txt}(dropped 9 {browse "http://scorreia.com/research/singletons.pdf":singleton observations})
{res}{txt}({browse "http://scorreia.com/research/hdfe.pdf":MWFE estimator} converged in 8 iterations)
{res}
{txt}HDFE Linear regression{col 51}Number of obs{col 67}= {res}     2,232
{txt}Absorbing 2 HDFE groups{col 51}F({res}  13{txt},{res}    190{txt}){col 67}= {res}      2.61
{txt}Statistics robust to heteroskedasticity{col 51}Prob > F{col 67}= {res}    0.0023
{txt}{col 51}R-squared{col 67}= {res}    0.8616
{txt}{col 51}Adj R-squared{col 67}= {res}    0.8458
{txt}{col 51}Within R-sq.{col 67}= {res}    0.0551
{txt}{col 1}Number of clusters ({res}PERMCO{txt}) {col 30}= {res}       191{txt}{col 51}Root MSE{col 67}= {res}    0.5779

{txt}{ralign 82:(Std. err. adjusted for {res:191} clusters in {res:PERMCO})}
{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 18}{c |}{col 30}    Robust
{col 1}       lnnpatent{col 18}{c |} Coefficient{col 30}  std. err.{col 42}      t{col 50}   P>|t|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}RDAT {c |}{col 18}{res}{space 2}-.1434438{col 30}{space 2}  .127503{col 41}{space 1}   -1.13{col 50}{space 3}0.262{col 58}{space 4} -.394947{col 71}{space 3} .1080594
{txt}{space 12}lnME {c |}{col 18}{res}{space 2} .1889166{col 30}{space 2} .0478473{col 41}{space 1}    3.95{col 50}{space 3}0.000{col 58}{space 4} .0945365{col 71}{space 3} .2832967
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2}-.0326406{col 30}{space 2} .1077881{col 41}{space 1}   -0.30{col 50}{space 3}0.762{col 58}{space 4}-.2452556{col 71}{space 3} .1799744
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .1585386{col 30}{space 2} .1247518{col 41}{space 1}    1.27{col 50}{space 3}0.205{col 58}{space 4}-.0875379{col 71}{space 3} .4046151
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2} .0334211{col 30}{space 2} .0573715{col 41}{space 1}    0.58{col 50}{space 3}0.561{col 58}{space 4}-.0797458{col 71}{space 3} .1465881
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2}-.0016346{col 30}{space 2} .0329894{col 41}{space 1}   -0.05{col 50}{space 3}0.961{col 58}{space 4}-.0667071{col 71}{space 3} .0634379
{txt}{space 13}ROA {c |}{col 18}{res}{space 2}-.2360198{col 30}{space 2} .2079451{col 41}{space 1}   -1.14{col 50}{space 3}0.258{col 58}{space 4}-.6461973{col 71}{space 3} .1741578
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2}-.0659717{col 30}{space 2} .2023882{col 41}{space 1}   -0.33{col 50}{space 3}0.745{col 58}{space 4}-.4651881{col 71}{space 3} .3332447
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2}-.1007619{col 30}{space 2}   .23036{col 41}{space 1}   -0.44{col 50}{space 3}0.662{col 58}{space 4}-.5551534{col 71}{space 3} .3536296
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2} .0023717{col 30}{space 2} .0026218{col 41}{space 1}    0.90{col 50}{space 3}0.367{col 58}{space 4}-.0027999{col 71}{space 3} .0075432
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2} .0112744{col 30}{space 2} .1834898{col 41}{space 1}    0.06{col 50}{space 3}0.951{col 58}{space 4}-.3506644{col 71}{space 3} .3732131
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}-1.363199{col 30}{space 2} .6136424{col 41}{space 1}   -2.22{col 50}{space 3}0.027{col 58}{space 4}-2.573626{col 71}{space 3}-.1527723
{txt}oms_HHidx_square {c |}{col 18}{res}{space 2} 1.086007{col 30}{space 2} .4534489{col 41}{space 1}    2.39{col 50}{space 3}0.018{col 58}{space 4} .1915666{col 71}{space 3} 1.980448
{txt}{space 11}_cons {c |}{col 18}{res}{space 2}-1.407922{col 30}{space 2} .7192487{col 41}{space 1}   -1.96{col 50}{space 3}0.052{col 58}{space 4} -2.82666{col 71}{space 3} .0108165
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 13}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text} Absorbed FE{col 14}{c |} Categories{col 27} - Redundant{col 39}  = Num. Coefs{col 54}{c |}
{res}{col 1}{text}{hline 13}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}      PERMCO{col 14}{c |}{space 1}      191{col 27}{space 1}      191{col 39}{result}{space 1}        0{col 53}{text}*{col 54}{c |}
{res}{col 1}{text}       fyear{col 14}{c |}{space 1}       26{col 27}{space 1}        1{col 39}{result}{space 1}       25{col 53}{text} {col 54}{c |}
{res}{col 1}{text}{hline 13}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
* = FE nested within cluster; treated as redundant for DoF computation
{res}{txt}
{com}.         estimates store OLSFE_firm_fyear
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"

{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"

{com}.         
.         reghdfe `innov_used' `rd_used' `ctrl_w' , absorb(i.PERMCO i.fyear#i.sic3) vce(cluster PERMCO)
{res}{txt}(dropped 995 {browse "http://scorreia.com/research/singletons.pdf":singleton observations})
{res}{txt}({browse "http://scorreia.com/research/hdfe.pdf":MWFE estimator} converged in 68 iterations)
{res}{txt}note: {res}oms_HHidx{txt} is probably collinear with the fixed effects (all partialled-out values are close to zero; tol = 1.0e-09)
{txt}note: {res}oms_HHidx_square{txt} is probably collinear with the fixed effects (all partialled-out values are close to zero; tol = 1.0e-09)
{res}
{txt}HDFE Linear regression{col 51}Number of obs{col 67}= {res}     1,246
{txt}Absorbing 2 HDFE groups{col 51}F({res}  11{txt},{res}    145{txt}){col 67}= {res}      2.43
{txt}Statistics robust to heteroskedasticity{col 51}Prob > F{col 67}= {res}    0.0083
{txt}{col 51}R-squared{col 67}= {res}    0.9193
{txt}{col 51}Adj R-squared{col 67}= {res}    0.8552
{txt}{col 51}Within R-sq.{col 67}= {res}    0.0387
{txt}{col 1}Number of clusters ({res}PERMCO{txt}) {col 30}= {res}       146{txt}{col 51}Root MSE{col 67}= {res}    0.5574

{txt}{ralign 82:(Std. err. adjusted for {res:146} clusters in {res:PERMCO})}
{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 18}{c |}{col 30}    Robust
{col 1}       lnnpatent{col 18}{c |} Coefficient{col 30}  std. err.{col 42}      t{col 50}   P>|t|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}RDAT {c |}{col 18}{res}{space 2}-.0826355{col 30}{space 2} .1908515{col 41}{space 1}   -0.43{col 50}{space 3}0.666{col 58}{space 4}-.4598457{col 71}{space 3} .2945748
{txt}{space 12}lnME {c |}{col 18}{res}{space 2} .2146266{col 30}{space 2} .0681744{col 41}{space 1}    3.15{col 50}{space 3}0.002{col 58}{space 4} .0798827{col 71}{space 3} .3493704
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2}-.1145207{col 30}{space 2} .1518025{col 41}{space 1}   -0.75{col 50}{space 3}0.452{col 58}{space 4}-.4145523{col 71}{space 3} .1855108
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .0671407{col 30}{space 2}  .168317{col 41}{space 1}    0.40{col 50}{space 3}0.691{col 58}{space 4}-.2655311{col 71}{space 3} .3998124
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2}-.0069025{col 30}{space 2} .0785855{col 41}{space 1}   -0.09{col 50}{space 3}0.930{col 58}{space 4}-.1622235{col 71}{space 3} .1484186
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2}-.0148135{col 30}{space 2}  .028309{col 41}{space 1}   -0.52{col 50}{space 3}0.602{col 58}{space 4}-.0707652{col 71}{space 3} .0411381
{txt}{space 13}ROA {c |}{col 18}{res}{space 2}-.2537037{col 30}{space 2} .2874424{col 41}{space 1}   -0.88{col 50}{space 3}0.379{col 58}{space 4} -.821822{col 71}{space 3} .3144147
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2}-.3551054{col 30}{space 2} .3807437{col 41}{space 1}   -0.93{col 50}{space 3}0.353{col 58}{space 4} -1.10763{col 71}{space 3} .3974192
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2}-.1468122{col 30}{space 2} .3348764{col 41}{space 1}   -0.44{col 50}{space 3}0.662{col 58}{space 4} -.808682{col 71}{space 3} .5150575
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2} .0010817{col 30}{space 2} .0025939{col 41}{space 1}    0.42{col 50}{space 3}0.677{col 58}{space 4} -.004045{col 71}{space 3} .0062084
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2}-.2479443{col 30}{space 2} .2773421{col 41}{space 1}   -0.89{col 50}{space 3}0.373{col 58}{space 4}-.7960996{col 71}{space 3} .3002111
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}        0{col 30}{txt}  (omitted)
oms_HHidx_square {c |}{col 18}{res}{space 2}        0{col 30}{txt}  (omitted)
{space 11}_cons {c |}{col 18}{res}{space 2}-1.183698{col 30}{space 2} 1.248025{col 41}{space 1}   -0.95{col 50}{space 3}0.344{col 58}{space 4}-3.650368{col 71}{space 3} 1.282973
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 14}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text}  Absorbed FE{col 15}{c |} Categories{col 28} - Redundant{col 40}  = Num. Coefs{col 55}{c |}
{res}{col 1}{text}{hline 14}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}       PERMCO{col 15}{c |}{space 1}      146{col 28}{space 1}      146{col 40}{result}{space 1}        0{col 54}{text}*{col 55}{c |}
{res}{col 1}{text}   fyear#sic3{col 15}{c |}{space 1}      396{col 28}{space 1}        1{col 40}{result}{space 1}      395{col 54}{text} {col 55}{c |}
{res}{col 1}{text}{hline 14}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
* = FE nested within cluster; treated as redundant for DoF computation
{res}{txt}
{com}.         estimates store OLSFE_firm_fyear2sic3
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"

{com}.     estadd local YearxIndustryFE "yes"

{txt}added macro:
    e(YearxIndustryFE) : "{res:yes}"

{com}.         
.         *Output the OLS ad OLS_FEs table as *.csv file 
.     esttab OLS OLSFE_firm OLSFE_firm_fyear OLSFE_firm_fyear2sic3, s(FirmFE YearFE YearxIndustryFE N) noconstant  star(* 0.10 ** 0.05 *** 0.01)  se(3) ar2 b(3) replace title("Fixed Effects Linear Model Estimates") mtitle("OLS" "OLSFE_firm" "OLSFE_firm_fyear" "OLSFE_firm_trend"), using "Fixed_Effects_Linear_Model_Estimates.csv"   
{res}{txt}{p 0 4 2}
(file {bf}
Fixed_Effects_Linear_Model_Estimates.csv{rm}
not found)
{p_end}
(output written to {browse  `"Fixed_Effects_Linear_Model_Estimates.csv"'})

{com}. 
.         
. *--------------------------------------------------------------------------------------------------
. * Table 9: Within and between variations
.     
.     * STATA log file to save results
.         log using Within_Between_Variation, smcl replace name(WithinBtwVariation)
{txt}{p 0 4 2}
(file {bf}
F:\Dropbox\RD_PATENT_FE\MissingRDPatent_ML\Within_Between_Variation.smcl{rm}
not found)
{p_end}
{.-}
      name:  {res}WithinBtwVariation
       {txt}log:  {res}F:\Dropbox\RD_PATENT_FE\MissingRDPatent_ML\Within_Between_Variation.smcl
  {txt}log type:  {res}smcl
 {txt}opened on:  {res}19 Jun 2022, 15:15:32
{txt}
{com}. 
.         * Define variables of interests (please change accordingly)
.         local innov_used "lnnpatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx  InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         
.         * Declare data to be panel data
.         xtset PERMCO fyear
{res}
{col 1}{txt:Panel variable: }{res:PERMCO}{txt: (unbalanced)}
{p 1 16 2}{txt:Time variable: }{res:fyear}{txt:, }{res:{bind:1975}}{txt: to }{res:{bind:2000}}{txt:, but with gaps}{p_end}
{txt}{col 10}Delta: {res}1 unit
{txt}
{com}.         
.         * Summarize xt data
.     xtsum `innov_used' `rd_used'        

{txt}Variable         {c |}      Mean   Std. dev.       Min        Max {c |}    Observations
{hline 17}{c +}{hline 44}{c +}{hline 16}
lnnpat~t{col 10}overall {c |} {res} 1.127338   1.471394          0   6.059123{txt} {c |}{col 69}N =    2241
{col 10}between {c |}{col 31}{res} 1.151799          0   5.669786{txt} {c |}{col 69}n =     200
{col 10}within  {c |}{col 31}{res} .5692454  -3.920321   3.154434{txt} {c |} T-bar =  11.205
{col 18}{c |}{col 63}{c |}
RDAT{col 10}overall {c |} {res} .1707743   .2882722          0    2.15309{txt} {c |}{col 69}N =    2241
{col 10}between {c |}{col 31}{res} .3198072          0    1.70795{txt} {c |}{col 69}n =     200
{col 10}within  {c |}{col 31}{res}   .14608  -1.032191   1.536577{txt} {c |} T-bar =  11.205

{com}.         
.         log close WithinBtwVariation
      {txt}name:  {res}WithinBtwVariation
       {txt}log:  {res}F:\Dropbox\RD_PATENT_FE\MissingRDPatent_ML\Within_Between_Variation.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}19 Jun 2022, 15:15:32
{txt}{.-}

{com}.          
. 
. *--------------------------------------------------------------------------------------------------
. * Table 10--11: Hausman-Taylor Estimates
.         
.         * Define variables of interests (please change accordingly)
.         local innov_used "lnnpatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         estimates clear
{res}{txt}
{com}.         
.     * Define the de-mean variables
.         foreach x of local ctrl_w{c -(}
{txt}  2{com}.                 by PERMCO: egen mean_`x' = mean(`x')
{txt}  3{com}.                 gen demean_`x' = `x' - mean_`x'
{txt}  4{com}.                 {c )-}
{txt}
{com}.                 
.         * IV Fixed Effect on firm, firm and year, firm and industry-trend
.         ivreghdfe `innov_used' `rd_used' (`ctrl_w' =  demean_*), vce(cluster PERMCO) tol(1e-6) accel(sd) 
{res}
{txt}IV (2SLS) estimation
{hline 20}

Estimates efficient for homoskedasticity only
Statistics consistent for homoskedasticity only

{col 55}Number of obs = {res}    2241
{txt}{col 55}F( 13,  2227) = {res}    7.38
{txt}{col 55}Prob > F      = {res}  0.0000
{txt}Total (centered) SS     = {res} 4849.599269{txt}{col 55}Centered R2   = {res}  0.2624
{txt}Total (uncentered) SS   = {res} 7697.666699{txt}{col 55}Uncentered R2 = {res}  0.5353
{txt}Residual SS             = {res} 3577.236334{txt}{col 55}Root MSE      = {res}   1.263

{txt}{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       lnnpatent{col 18}{c |} Coefficient{col 30}  Std. err.{col 42}      z{col 50}   P>|z|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}lnME {c |}{col 18}{res}{space 2}  .210457{col 30}{space 2} .0543414{col 41}{space 1}    3.87{col 50}{space 3}0.000{col 58}{space 4} .1039497{col 71}{space 3} .3169642
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2} .0454073{col 30}{space 2} .1489418{col 41}{space 1}    0.30{col 50}{space 3}0.760{col 58}{space 4}-.2465133{col 71}{space 3} .3373279
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2}-.1131488{col 30}{space 2} .1101714{col 41}{space 1}   -1.03{col 50}{space 3}0.304{col 58}{space 4}-.3290807{col 71}{space 3} .1027831
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2}-.0165101{col 30}{space 2} .0813307{col 41}{space 1}   -0.20{col 50}{space 3}0.839{col 58}{space 4}-.1759153{col 71}{space 3} .1428952
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2}-.0317534{col 30}{space 2} .0321211{col 41}{space 1}   -0.99{col 50}{space 3}0.323{col 58}{space 4}-.0947097{col 71}{space 3} .0312029
{txt}{space 13}ROA {c |}{col 18}{res}{space 2} .5581353{col 30}{space 2} .4208461{col 41}{space 1}    1.33{col 50}{space 3}0.185{col 58}{space 4}-.2667079{col 71}{space 3} 1.382978
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2} .0268529{col 30}{space 2}  .308861{col 41}{space 1}    0.09{col 50}{space 3}0.931{col 58}{space 4}-.5785036{col 71}{space 3} .6322093
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2} .0990702{col 30}{space 2}   .33866{col 41}{space 1}    0.29{col 50}{space 3}0.770{col 58}{space 4}-.5646913{col 71}{space 3} .7628317
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2} .0001363{col 30}{space 2} .0049488{col 41}{space 1}    0.03{col 50}{space 3}0.978{col 58}{space 4}-.0095632{col 71}{space 3} .0098358
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2}-.1848489{col 30}{space 2} .2247521{col 41}{space 1}   -0.82{col 50}{space 3}0.411{col 58}{space 4} -.625355{col 71}{space 3} .2556572
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}-1.206498{col 30}{space 2} .8700355{col 41}{space 1}   -1.39{col 50}{space 3}0.166{col 58}{space 4}-2.911737{col 71}{space 3} .4987398
{txt}oms_HHidx_square {c |}{col 18}{res}{space 2} 1.037174{col 30}{space 2} .7540122{col 41}{space 1}    1.38{col 50}{space 3}0.169{col 58}{space 4}-.4406623{col 71}{space 3} 2.515011
{txt}{space 12}RDAT {c |}{col 18}{res}{space 2} 1.015104{col 30}{space 2} .2360396{col 41}{space 1}    4.30{col 50}{space 3}0.000{col 58}{space 4} .5524745{col 71}{space 3} 1.477733
{txt}{space 11}_cons {c |}{col 18}{res}{space 2}-.7753384{col 30}{space 2} .7902537{col 41}{space 1}   -0.98{col 50}{space 3}0.327{col 58}{space 4}-2.324207{col 71}{space 3} .7735303
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{help ivreg2##idtest:Underidentification test} (Anderson canon. corr. LM statistic):{res}{col 71} 213.892
{txt}{col 52}Chi-sq({res}1{txt}) P-val =  {res}{col 73}0.0000
{txt}{hline 78}
{help ivreg2##widtest:Weak identification test} (Cragg-Donald Wald F statistic):{res}{col 71}  19.582
{txt}Stock-Yogo weak ID test critical values:{res}{txt}{col 64}<not available>
{hline 78}
{help ivreg2##overidtests:Sargan statistic} (overidentification test of all instruments):{res}{col 71}   0.000
{txt}{col 50}(equation exactly identified)
{hline 78}
Instrumented:{col 23}lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT
{col 23}KZidx InstOwn oms_HHidx oms_HHidx_square
Included instruments:{col 23}RDAT
Excluded instruments:{col 23}demean_lnME demean_RD_missing demean_lnAge demean_lnK2L
{col 23}demean_TobinQ demean_ROA demean_Leverage demean_CASHAT
{col 23}demean_KZidx demean_InstOwn demean_oms_HHidx
{col 23}demean_oms_HHidx_square
{hline 78}

{com}.         estimates store HT_firm
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"

{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"

{com}. 
.         ivreghdfe `innov_used' `rd_used' (`ctrl_w' =  demean_*), absorb(i.fyear) vce(cluster PERMCO) tol(1e-6) accel(sd)
{res}{txt}({browse "http://scorreia.com/research/hdfe.pdf":MWFE estimator} converged in 1 iterations)
{res}
{txt}IV (2SLS) estimation
{hline 20}

Estimates efficient for homoskedasticity only
Statistics consistent for homoskedasticity only

{col 55}Number of obs = {res}    2241
{txt}{col 55}F( 13,  2202) = {res}   12.25
{txt}{col 55}Prob > F      = {res}  0.0000
{txt}Total (centered) SS     = {res} 4832.492198{txt}{col 55}Centered R2   = {res}  0.3992
{txt}Total (uncentered) SS   = {res} 4832.492198{txt}{col 55}Uncentered R2 = {res}  0.3992
{txt}Residual SS             = {res} 2903.138805{txt}{col 55}Root MSE      = {res}   1.148

{txt}{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       lnnpatent{col 18}{c |} Coefficient{col 30}  Std. err.{col 42}      t{col 50}   P>|t|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}lnME {c |}{col 18}{res}{space 2} .2655748{col 30}{space 2} .0518608{col 41}{space 1}    5.12{col 50}{space 3}0.000{col 58}{space 4} .1638736{col 71}{space 3}  .367276
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2} .0732529{col 30}{space 2} .1365498{col 41}{space 1}    0.54{col 50}{space 3}0.592{col 58}{space 4}-.1945271{col 71}{space 3} .3410328
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .1077443{col 30}{space 2} .0766325{col 41}{space 1}    1.41{col 50}{space 3}0.160{col 58}{space 4}-.0425353{col 71}{space 3} .2580239
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2} .0942365{col 30}{space 2} .0859229{col 41}{space 1}    1.10{col 50}{space 3}0.273{col 58}{space 4}-.0742619{col 71}{space 3}  .262735
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2}-.0386076{col 30}{space 2} .0296962{col 41}{space 1}   -1.30{col 50}{space 3}0.194{col 58}{space 4}-.0968431{col 71}{space 3} .0196279
{txt}{space 13}ROA {c |}{col 18}{res}{space 2} .5811766{col 30}{space 2} .3821459{col 41}{space 1}    1.52{col 50}{space 3}0.128{col 58}{space 4}-.1682275{col 71}{space 3} 1.330581
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2} .1258125{col 30}{space 2} .2854076{col 41}{space 1}    0.44{col 50}{space 3}0.659{col 58}{space 4}-.4338838{col 71}{space 3} .6855087
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2} .2657184{col 30}{space 2} .3111604{col 41}{space 1}    0.85{col 50}{space 3}0.393{col 58}{space 4}-.3444802{col 71}{space 3}  .875917
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2}-.0007676{col 30}{space 2} .0045617{col 41}{space 1}   -0.17{col 50}{space 3}0.866{col 58}{space 4}-.0097132{col 71}{space 3}  .008178
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2} .1727267{col 30}{space 2} .2409644{col 41}{space 1}    0.72{col 50}{space 3}0.474{col 58}{space 4}-.2998147{col 71}{space 3} .6452681
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}-1.024245{col 30}{space 2} .8061588{col 41}{space 1}   -1.27{col 50}{space 3}0.204{col 58}{space 4}-2.605156{col 71}{space 3} .5566662
{txt}oms_HHidx_square {c |}{col 18}{res}{space 2} .6911054{col 30}{space 2}  .705842{col 41}{space 1}    0.98{col 50}{space 3}0.328{col 58}{space 4}-.6930803{col 71}{space 3} 2.075291
{txt}{space 12}RDAT {c |}{col 18}{res}{space 2}  1.34053{col 30}{space 2} .2233108{col 41}{space 1}    6.00{col 50}{space 3}0.000{col 58}{space 4}  .902608{col 71}{space 3} 1.778452
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{help ivreg2##idtest:Underidentification test} (Anderson canon. corr. LM statistic):{res}{col 71} 134.447
{txt}{col 52}Chi-sq({res}1{txt}) P-val =  {res}{col 73}0.0000
{txt}{hline 78}
{help ivreg2##widtest:Weak identification test} (Cragg-Donald Wald F statistic):{res}{col 71}  11.712
{txt}Stock-Yogo weak ID test critical values:{res}{txt}{col 64}<not available>
{hline 78}
{help ivreg2##overidtests:Sargan statistic} (overidentification test of all instruments):{res}{col 71}   0.000
{txt}{col 50}(equation exactly identified)
{hline 78}
Instrumented:{col 23}lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT
{col 23}KZidx InstOwn oms_HHidx oms_HHidx_square
Included instruments:{col 23}RDAT
Excluded instruments:{col 23}demean_lnME demean_RD_missing demean_lnAge demean_lnK2L
{col 23}demean_TobinQ demean_ROA demean_Leverage demean_CASHAT
{col 23}demean_KZidx demean_InstOwn demean_oms_HHidx
{col 23}demean_oms_HHidx_square
{help ivreg2##partial:Partialled-out}:{col 23}_cons
{col 23}nb: total SS, model F and R2s are after partialling-out;
{col 23}    any {help ivreg2##s_small:small-sample adjustments} include partialled-out
{col 23}    variables in regressor count K
{hline 78}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 13}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text} Absorbed FE{col 14}{c |} Categories{col 27} - Redundant{col 39}  = Num. Coefs{col 54}{c |}
{res}{col 1}{text}{hline 13}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}       fyear{col 14}{c |}{space 1}       26{col 27}{space 1}        0{col 39}{result}{space 1}       26{col 53}{text} {col 54}{c |}
{res}{col 1}{text}{hline 13}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
{res}{txt}
{com}.         estimates store HT_firm_fyear
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"

{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"

{com}. 
.         
.         ivreghdfe `innov_used' `rd_used' (`ctrl_w' =  demean_*), absorb(i.fyear#i.sic3) vce(cluster PERMCO) tol(1e-6) accel(sd)
{res}{txt}(dropped 981 {browse "http://scorreia.com/research/singletons.pdf":singleton observations})
{res}{txt}({browse "http://scorreia.com/research/hdfe.pdf":MWFE estimator} converged in 1 iterations)
{res}
{txt}IV (2SLS) estimation
{hline 20}

Estimates efficient for homoskedasticity only
Statistics consistent for homoskedasticity only

{col 55}Number of obs = {res}    1260
{txt}{col 55}F( 11,   849) = {res}   10.22
{txt}{col 55}Prob > F      = {res}  0.0000
{txt}Total (centered) SS     = {res} 1832.380196{txt}{col 55}Centered R2   = {res}  0.5137
{txt}Total (uncentered) SS   = {res} 1832.380196{txt}{col 55}Uncentered R2 = {res}  0.5137
{txt}Residual SS             = {res} 891.0782694{txt}{col 55}Root MSE      = {res}   1.024

{txt}{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 1}       lnnpatent{col 18}{c |} Coefficient{col 30}  Std. err.{col 42}      t{col 50}   P>|t|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}lnME {c |}{col 18}{res}{space 2} .2607919{col 30}{space 2} .0646823{col 41}{space 1}    4.03{col 50}{space 3}0.000{col 58}{space 4} .1338359{col 71}{space 3} .3877479
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2} -.362126{col 30}{space 2} .2342779{col 41}{space 1}   -1.55{col 50}{space 3}0.123{col 58}{space 4}-.8219578{col 71}{space 3} .0977058
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .2922784{col 30}{space 2} .0952796{col 41}{space 1}    3.07{col 50}{space 3}0.002{col 58}{space 4} .1052673{col 71}{space 3} .4792896
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2} .2731514{col 30}{space 2}  .121288{col 41}{space 1}    2.25{col 50}{space 3}0.025{col 58}{space 4} .0350919{col 71}{space 3}  .511211
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2} .0043347{col 30}{space 2} .0359999{col 41}{space 1}    0.12{col 50}{space 3}0.904{col 58}{space 4}-.0663247{col 71}{space 3}  .074994
{txt}{space 13}ROA {c |}{col 18}{res}{space 2}-.1356236{col 30}{space 2} .4494238{col 41}{space 1}   -0.30{col 50}{space 3}0.763{col 58}{space 4}-1.017736{col 71}{space 3} .7464884
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2}-.4131993{col 30}{space 2} .4229361{col 41}{space 1}   -0.98{col 50}{space 3}0.329{col 58}{space 4}-1.243322{col 71}{space 3} .4169237
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2} -.514657{col 30}{space 2} .3871418{col 41}{space 1}   -1.33{col 50}{space 3}0.184{col 58}{space 4}-1.274524{col 71}{space 3} .2452102
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2}-.0028817{col 30}{space 2} .0053818{col 41}{space 1}   -0.54{col 50}{space 3}0.592{col 58}{space 4}-.0134449{col 71}{space 3} .0076815
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2} -.162306{col 30}{space 2} .3829306{col 41}{space 1}   -0.42{col 50}{space 3}0.672{col 58}{space 4}-.9139076{col 71}{space 3} .5892956
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}        0{col 30}{txt}  (omitted)
oms_HHidx_square {c |}{col 18}{res}{space 2}        0{col 30}{txt}  (omitted)
{space 12}RDAT {c |}{col 18}{res}{space 2} .1942675{col 30}{space 2} .2615702{col 41}{space 1}    0.74{col 50}{space 3}0.458{col 58}{space 4}-.3191326{col 71}{space 3} .7076677
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{help ivreg2##idtest:Underidentification test} (Anderson canon. corr. LM statistic):{res}{col 71}  -0.000
{txt}{col 52}Chi-sq({res}1{txt}) P-val =  {res}{col 73}1.0000
{txt}{hline 78}
{help ivreg2##widtest:Weak identification test} (Cragg-Donald Wald F statistic):{res}{col 71}       .
{txt}Stock-Yogo weak ID test critical values:{res}{txt}{col 64}<not available>
{hline 78}
{help ivreg2##overidtests:Sargan statistic} (overidentification test of all instruments):{res}{col 71}   6.652
{txt}{col 52}Chi-sq({res}2{txt}) P-val =  {res}{col 73}0.0359
{txt}{hline 78}
Instrumented:{col 23}lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT
{col 23}KZidx InstOwn oms_HHidx oms_HHidx_square
Included instruments:{col 23}RDAT
Excluded instruments:{col 23}demean_lnME demean_RD_missing demean_lnAge demean_lnK2L
{col 23}demean_TobinQ demean_ROA demean_Leverage demean_CASHAT
{col 23}demean_KZidx demean_InstOwn demean_oms_HHidx
{col 23}demean_oms_HHidx_square
{help ivreg2##partial:Partialled-out}:{col 23}_cons
{col 23}nb: total SS, model F and R2s are after partialling-out;
{col 23}    any {help ivreg2##s_small:small-sample adjustments} include partialled-out
{col 23}    variables in regressor count K
{hline 78}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 14}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text}  Absorbed FE{col 15}{c |} Categories{col 28} - Redundant{col 40}  = Num. Coefs{col 55}{c |}
{res}{col 1}{text}{hline 14}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}   fyear#sic3{col 15}{c |}{space 1}      400{col 28}{space 1}        0{col 40}{result}{space 1}      400{col 54}{text} {col 55}{c |}
{res}{col 1}{text}{hline 14}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
{res}{txt}
{com}.         estimates store HT_firm_fyear2sic3
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"

{com}.     estadd local YearxIndustryFE "yes"

{txt}added macro:
    e(YearxIndustryFE) : "{res:yes}"

{com}.         
.         *Output the Hausman Taylor table as *.csv file 
.     esttab HT_firm HT_firm_fyear HT_firm_fyear2sic3, s(FirmFE YearFE YearxIndustryFE N) noconstant  star(* 0.10 ** 0.05 *** 0.01)  se(3) ar2 b(3) replace title("Hausman-Taylor Estimates") mtitle("HT_firm" "HT_firm_fyear" "HT_firm_trend"), using "Hausman_Taylor_Estimates.csv"     
{res}{txt}{p 0 4 2}
(file {bf}
Hausman_Taylor_Estimates.csv{rm}
not found)
{p_end}
(output written to {browse  `"Hausman_Taylor_Estimates.csv"'})

{com}.         
.         
. *--------------------------------------------------------------------------------------------------
. * Table 12--17: Post-regularization LASSO linear regression
.     
.         * Define variables of interests (please change accordingly)
.         local innov_used "lnnpatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx  InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         estimates clear
{res}{txt}
{com}. 
.         * Post-regularization Linear Model Estimation
.     qui poregress `innov_used' `rd_used' `ctrl_w', controls(i.PERMCO) vce(cluster PERMCO) 
{txt}
{com}.         estimates store po_firm
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"
{res}{txt}
{com}.         
.         qui poregress `innov_used' `rd_used' `ctrl_w', controls(i.PERMCO i.fyear) vce(cluster PERMCO) 
{txt}
{com}.         estimates store po_firm_fyear
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"
{res}{txt}
{com}.         
.         qui poregress `innov_used' `rd_used' `ctrl_w', controls(i.PERMCO i.fyear#i.sic3) vce(cluster PERMCO) 
{txt}
{com}.         estimates store po_firm_fyear2sic3
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "yes"

{txt}added macro:
    e(YearxIndustryFE) : "{res:yes}"
{res}{txt}
{com}.         
.         *Output the Post-regularization LASSO linear table as *.csv file 
.     esttab po_firm po_firm_fyear po_firm_fyear2sic3, s(FirmFE YearFE YearxIndustryFE N N_clust k_controls k_controls_sel) noconstant star(* 0.10 ** 0.05 *** 0.01)  se(3) ar2 b(3) replace title("Post-regularization LASSO Linear Model Estimates") mtitle("Po_firm" "Po_firm_fyear" "Po_firm_trend"), using "Post_regularization_LASSO_Linear_Model_Estimates.csv"    
{res}{txt}{p 0 4 2}
(file {bf}
Post_regularization_LASSO_Linear_Model_Estimates.csv{rm}
not found)
{p_end}
(output written to {browse  `"Post_regularization_LASSO_Linear_Model_Estimates.csv"'})

{com}. 
.         
. *--------------------------------------------------------------------------------------------------
. * Table 12--17: Double Machine Learning LASSO linear regression
.   *To save time, we set the cross-fit number (xfold) as 5 in this replicate code.
.   
.         * Define variables of interests (please change accordingly)
.         local innov_used "lnnpatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx  InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         estimates clear
{res}{txt}
{com}. 
.   * Double Machine Learning Linear Model Estimation
.     qui xporegress `innov_used' `rd_used' `ctrl_w', controls(i.PERMCO) vce(cluster PERMCO) xfolds(5)
{txt}
{com}.         estimates store xpo_firm
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"
{res}{txt}
{com}.         
.         qui xporegress `innov_used' `rd_used' `ctrl_w', controls(i.PERMCO i.fyear) vce(cluster PERMCO) xfolds(5)
{txt}
{com}.         estimates store xpo_firm_fyear
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"
{res}{txt}
{com}.         
.         qui xporegress `innov_used' `rd_used' `ctrl_w', controls(i.PERMCO i.fyear#i.sic3) vce(cluster PERMCO) xfolds(5)
{txt}
{com}.         estimates store xpo_firm_fyear2sic3
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "yes"

{txt}added macro:
    e(YearxIndustryFE) : "{res:yes}"
{res}{txt}
{com}.         
.         *Output the DML LASSO linear table as *.csv file 
.         esttab xpo_firm xpo_firm_fyear xpo_firm_fyear2sic3, s(FirmFE YearFE YearxIndustryFE N N_clust k_controls k_controls_sel) noconstant  star(* 0.10 ** 0.05 *** 0.01)  se(3) ar2 b(3) replace title("DML LASSO Linear Model Estimates") mtitle("DML_firm" "DML_firm_fyear" "DML_firm_trend"), using "DML_LASSO_Linear_Model_Estimates.csv" 
{res}{txt}{p 0 4 2}
(file {bf}
DML_LASSO_Linear_Model_Estimates.csv{rm}
not found)
{p_end}
(output written to {browse  `"DML_LASSO_Linear_Model_Estimates.csv"'})

{com}.         
. 
. ********************************************************************************************************************
. * Poisson model
. ********************************************************************************************************************
. 
. *--------------------------------------------------------------------------------------------------------
. * Table 18--21: Poisson regression and Fixed effect estimation 
.         
.         * Define variables of interests (please change accordingly)
.         local innov_used "npatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx  InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         estimates clear
{res}{txt}
{com}.         
.         * Poisson
.         ppmlhdfe `innov_used' `rd_used' `ctrl_w', vce(cluster PERMCO) 
{res}{txt}{col  0}Iteration 1:{txt}{col 16}deviance = {res}4.4097e+04 {col 39}{txt}eps = {res}.        {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -5.73  {txt}P   
{txt}{col  0}Iteration 2:{txt}{col 16}deviance = {res}3.3817e+04 {col 39}{txt}eps = {res}3.04e-01 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -7.54  {txt}    
{txt}{col  0}Iteration 3:{txt}{col 16}deviance = {res}3.2531e+04 {col 39}{txt}eps = {res}3.95e-02 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -8.65  {txt}    
{txt}{col  0}Iteration 4:{txt}{col 16}deviance = {res}3.2490e+04 {col 39}{txt}eps = {res}1.26e-03 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -8.90  {txt}    
{txt}{col  0}Iteration 5:{txt}{col 16}deviance = {res}3.2490e+04 {col 39}{txt}eps = {res}2.04e-06 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -8.91  {txt}    
{txt}{col  0}Iteration 6:{txt}{col 16}deviance = {res}3.2490e+04 {col 39}{txt}eps = {res}8.30e-12 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {res} -8.91  {txt} S O
{txt}{hline 108}
{txt}(legend: {res}p{txt}: exact partial-out   {res}s{txt}: exact solver   {res}h{txt}: step-halving   {res}o{txt}: epsilon below tolerance)
{txt}Converged in 6 iterations and 6 HDFE sub-iterations (tol = 1.0e-08)
{res}{txt}
PPML regression{col 51}No. of obs{col 67}={col 69}{res}     2,241
{txt}{col 51}Residual df{col 67}={col 69}{res}       199
{txt}Statistics robust to heteroskedasticity{col 51}Wald chi2({res}13{txt}){col 67}={col 69}{res}   1255.02
{txt}Deviance{col 22}={col 24}{res} 32489.92264{txt}{col 51}Prob > chi2{col 67}={col 69}{res}    0.0000
{txt}Log pseudolikelihood ={col 24}{res}-18486.03666{txt}{col 51}Pseudo R2{col 67}={col 69}{res}    0.7386
{txt}
Number of clusters ({res}PERMCO{txt}){col 29}={col 31}{res}       200
{txt}{ralign 82:(Std. err. adjusted for {res:200} clusters in {res:PERMCO})}
{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 18}{c |}{col 30}    Robust
{col 1}         npatent{col 18}{c |} Coefficient{col 30}  std. err.{col 42}      z{col 50}   P>|z|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}RDAT {c |}{col 18}{res}{space 2} 1.685237{col 30}{space 2} .3917227{col 41}{space 1}    4.30{col 50}{space 3}0.000{col 58}{space 4} .9174751{col 71}{space 3}    2.453
{txt}{space 12}lnME {c |}{col 18}{res}{space 2} .7532613{col 30}{space 2} .1008531{col 41}{space 1}    7.47{col 50}{space 3}0.000{col 58}{space 4} .5555929{col 71}{space 3} .9509297
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2}-1.090508{col 30}{space 2} .4212893{col 41}{space 1}   -2.59{col 50}{space 3}0.010{col 58}{space 4}-1.916219{col 71}{space 3}-.2647956
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .2001286{col 30}{space 2} .2475389{col 41}{space 1}    0.81{col 50}{space 3}0.419{col 58}{space 4}-.2850387{col 71}{space 3} .6852958
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2} .0801171{col 30}{space 2} .1208746{col 41}{space 1}    0.66{col 50}{space 3}0.507{col 58}{space 4}-.1567927{col 71}{space 3} .3170269
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2}-.1002551{col 30}{space 2} .0748009{col 41}{space 1}   -1.34{col 50}{space 3}0.180{col 58}{space 4}-.2468621{col 71}{space 3} .0463519
{txt}{space 13}ROA {c |}{col 18}{res}{space 2} 1.095109{col 30}{space 2} .8644311{col 41}{space 1}    1.27{col 50}{space 3}0.205{col 58}{space 4} -.599145{col 71}{space 3} 2.789363
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2}-1.817535{col 30}{space 2} .8541538{col 41}{space 1}   -2.13{col 50}{space 3}0.033{col 58}{space 4}-3.491645{col 71}{space 3}-.1434239
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2} -1.23386{col 30}{space 2}  .761617{col 41}{space 1}   -1.62{col 50}{space 3}0.105{col 58}{space 4}-2.726602{col 71}{space 3} .2588818
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2} .0031449{col 30}{space 2} .0113358{col 41}{space 1}    0.28{col 50}{space 3}0.781{col 58}{space 4}-.0190729{col 71}{space 3} .0253626
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2}-1.068769{col 30}{space 2} .6176371{col 41}{space 1}   -1.73{col 50}{space 3}0.084{col 58}{space 4}-2.279315{col 71}{space 3} .1417777
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}-3.148439{col 30}{space 2}  1.59481{col 41}{space 1}   -1.97{col 50}{space 3}0.048{col 58}{space 4}-6.274208{col 71}{space 3}-.0226695
{txt}oms_HHidx_square {c |}{col 18}{res}{space 2}  2.64045{col 30}{space 2} 1.335168{col 41}{space 1}    1.98{col 50}{space 3}0.048{col 58}{space 4} .0235683{col 71}{space 3} 5.257331
{txt}{space 11}_cons {c |}{col 18}{res}{space 2}-7.544048{col 30}{space 2} .9234604{col 41}{space 1}   -8.17{col 50}{space 3}0.000{col 58}{space 4}-9.353997{col 71}{space 3}-5.734099
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}

{com}.         estimates store poisson
{txt}
{com}.         estadd local FirmFE "no"

{txt}added macro:
             e(FirmFE) : "{res:no}"

{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"

{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"

{com}.                 
.         ppmlhdfe `innov_used' `rd_used' `ctrl_w', absorb(i.PERMCO) vce(cluster PERMCO) separation("none")
{res}{txt}(dropped 9 {browse "http://scorreia.com/research/singletons.pdf":singleton observations})
{res}{txt}{col  0}Iteration 1:{txt}{col 16}deviance = {res}1.8689e+04 {col 39}{txt}eps = {res}.        {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -3.55  {txt}P   
{txt}{col  0}Iteration 2:{txt}{col 16}deviance = {res}1.1423e+04 {col 39}{txt}eps = {res}6.36e-01 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -4.80  {txt}    
{txt}{col  0}Iteration 3:{txt}{col 16}deviance = {res}1.0257e+04 {col 39}{txt}eps = {res}1.14e-01 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -5.90  {txt}    
{txt}{col  0}Iteration 4:{txt}{col 16}deviance = {res}1.0025e+04 {col 39}{txt}eps = {res}2.31e-02 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -6.84  {txt}    
{txt}{col  0}Iteration 5:{txt}{col 16}deviance = {res}9.9847e+03 {col 39}{txt}eps = {res}4.09e-03 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -7.67  {txt}    
{txt}{col  0}Iteration 6:{txt}{col 16}deviance = {res}9.9776e+03 {col 39}{txt}eps = {res}7.06e-04 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -8.67  {txt}    
{txt}{col  0}Iteration 7:{txt}{col 16}deviance = {res}9.9758e+03 {col 39}{txt}eps = {res}1.85e-04 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -9.67  {txt}    
{txt}{col  0}Iteration 8:{txt}{col 16}deviance = {res}9.9751e+03 {col 39}{txt}eps = {res}6.49e-05 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res}-10.67  {txt}    
{txt}{col  0}Iteration 9:{txt}{col 16}deviance = {res}9.9749e+03 {col 39}{txt}eps = {res}2.39e-05 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {res}-11.67  {txt}    
{txt}{col  0}Iteration 10:{txt}{col 16}deviance = {res}9.9748e+03 {col 39}{txt}eps = {res}8.78e-06 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {res}-12.67  {txt} S  
{txt}{col  0}Iteration 11:{txt}{col 16}deviance = {res}9.9748e+03 {col 39}{txt}eps = {res}3.23e-06 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {res}-13.67  {txt} S  
{txt}{col  0}Iteration 12:{txt}{col 16}deviance = {res}9.9748e+03 {col 39}{txt}eps = {res}1.19e-06 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {res}-14.67  {txt} S  
{txt}{col  0}Iteration 13:{txt}{col 16}deviance = {res}9.9747e+03 {col 39}{txt}eps = {res}4.37e-07 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {err}-15.67  {txt} S  
{txt}{col  0}Iteration 14:{txt}{col 16}deviance = {res}9.9747e+03 {col 39}{txt}eps = {res}1.61e-07 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-07{col 82}{txt} min(eta) = {err}-16.67  {txt} S  
{txt}{col  0}Iteration 15:{txt}{col 16}deviance = {res}9.9747e+03 {col 39}{txt}eps = {res}5.92e-08 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-07{col 82}{txt} min(eta) = {err}-17.67  {txt} S  
{txt}{col  0}Iteration 16:{txt}{col 16}deviance = {res}9.9747e+03 {col 39}{txt}eps = {res}2.18e-08 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-09{col 82}{txt} min(eta) = {err}-18.67  {txt} S  
{txt}{col  0}Iteration 17:{txt}{col 16}deviance = {res}9.9747e+03 {col 39}{txt}eps = {res}8.01e-09 {txt}{col 55}{txt}iters = {res}1{col 68}{txt}tol ={res} 1.0e-09{col 82}{txt} min(eta) = {err}-19.67  {txt} S O
{txt}{hline 108}
{txt}(legend: {res}p{txt}: exact partial-out   {res}s{txt}: exact solver   {res}h{txt}: step-halving   {res}o{txt}: epsilon below tolerance)
{txt}Converged in 17 iterations and 17 HDFE sub-iterations (tol = 1.0e-08)
{res}{txt}
HDFE {help ppmlhdfe##description:PPML} regression{col 51}No. of obs{col 67}={col 69}{res}     2,232
{txt}Absorbing 1 HDFE group{col 51}Residual df{col 67}={col 69}{res}       190
{txt}Statistics robust to heteroskedasticity{col 51}Wald chi2({res}13{txt}){col 67}={col 69}{res}    544.42
{txt}Deviance{col 22}={col 24}{res} 9974.744201{txt}{col 51}Prob > chi2{col 67}={col 69}{res}    0.0000
{txt}Log pseudolikelihood ={col 24}{res}-7217.140837{txt}{col 51}Pseudo R2{col 67}={col 69}{res}    0.8978
{txt}
Number of clusters ({res}PERMCO{txt}){col 29}={col 31}{res}       191
{txt}{ralign 82:(Std. err. adjusted for {res:191} clusters in {res:PERMCO})}
{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 18}{c |}{col 30}    Robust
{col 1}         npatent{col 18}{c |} Coefficient{col 30}  std. err.{col 42}      z{col 50}   P>|z|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}RDAT {c |}{col 18}{res}{space 2}-.1323084{col 30}{space 2} .5792053{col 41}{space 1}   -0.23{col 50}{space 3}0.819{col 58}{space 4} -1.26753{col 71}{space 3} 1.002913
{txt}{space 12}lnME {c |}{col 18}{res}{space 2} .3501621{col 30}{space 2} .1509001{col 41}{space 1}    2.32{col 50}{space 3}0.020{col 58}{space 4} .0544032{col 71}{space 3}  .645921
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2}-.1099245{col 30}{space 2} .2455394{col 41}{space 1}   -0.45{col 50}{space 3}0.654{col 58}{space 4}-.5911729{col 71}{space 3} .3713239
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .1373596{col 30}{space 2} .2747363{col 41}{space 1}    0.50{col 50}{space 3}0.617{col 58}{space 4}-.4011136{col 71}{space 3} .6758328
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2} .0092804{col 30}{space 2} .2409326{col 41}{space 1}    0.04{col 50}{space 3}0.969{col 58}{space 4}-.4629389{col 71}{space 3} .4814996
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2} .0185099{col 30}{space 2} .0339195{col 41}{space 1}    0.55{col 50}{space 3}0.585{col 58}{space 4} -.047971{col 71}{space 3} .0849909
{txt}{space 13}ROA {c |}{col 18}{res}{space 2} .3465546{col 30}{space 2} .8297778{col 41}{space 1}    0.42{col 50}{space 3}0.676{col 58}{space 4} -1.27978{col 71}{space 3} 1.972889
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2} .4609821{col 30}{space 2} .5345087{col 41}{space 1}    0.86{col 50}{space 3}0.388{col 58}{space 4}-.5866356{col 71}{space 3}   1.5086
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2} -.257952{col 30}{space 2} .5235214{col 41}{space 1}   -0.49{col 50}{space 3}0.622{col 58}{space 4}-1.284035{col 71}{space 3} .7681311
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2} .0003001{col 30}{space 2} .0093675{col 41}{space 1}    0.03{col 50}{space 3}0.974{col 58}{space 4}-.0180599{col 71}{space 3}   .01866
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2}-.4993286{col 30}{space 2} .2928004{col 41}{space 1}   -1.71{col 50}{space 3}0.088{col 58}{space 4}-1.073207{col 71}{space 3} .0745497
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}-3.893925{col 30}{space 2} 1.538905{col 41}{space 1}   -2.53{col 50}{space 3}0.011{col 58}{space 4}-6.910122{col 71}{space 3} -.877727
{txt}oms_HHidx_square {c |}{col 18}{res}{space 2} 3.117866{col 30}{space 2}  1.69835{col 41}{space 1}    1.84{col 50}{space 3}0.066{col 58}{space 4}-.2108384{col 71}{space 3}  6.44657
{txt}{space 11}_cons {c |}{col 18}{res}{space 2}-.2935959{col 30}{space 2} 1.682411{col 41}{space 1}   -0.17{col 50}{space 3}0.861{col 58}{space 4}-3.591061{col 71}{space 3} 3.003869
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 13}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text} Absorbed FE{col 14}{c |} Categories{col 27} - Redundant{col 39}  = Num. Coefs{col 54}{c |}
{res}{col 1}{text}{hline 13}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}      PERMCO{col 14}{c |}{space 1}      191{col 27}{space 1}      191{col 39}{result}{space 1}        0{col 53}{text}*{col 54}{c |}
{res}{col 1}{text}{hline 13}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
* = FE nested within cluster; treated as redundant for DoF computation
{res}{txt}
{com}.     estimates store ppml_firm
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"

{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"

{com}.                 
.         ppmlhdfe `innov_used' `rd_used' `ctrl_w', absorb(i.PERMCO i.fyear) vce(cluster PERMCO) separation("none")
{res}{txt}(dropped 9 {browse "http://scorreia.com/research/singletons.pdf":singleton observations})
{res}{txt}{col  0}Iteration 1:{txt}{col 16}deviance = {res}1.8566e+04 {col 39}{txt}eps = {res}.        {txt}{col 55}{txt}iters = {res}5{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -3.39  {txt}P   
{txt}{col  0}Iteration 2:{txt}{col 16}deviance = {res}1.1107e+04 {col 39}{txt}eps = {res}6.72e-01 {txt}{col 55}{txt}iters = {res}4{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -4.80  {txt}    
{txt}{col  0}Iteration 3:{txt}{col 16}deviance = {res}9.8939e+03 {col 39}{txt}eps = {res}1.23e-01 {txt}{col 55}{txt}iters = {res}4{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -6.11  {txt}    
{txt}{col  0}Iteration 4:{txt}{col 16}deviance = {res}9.6584e+03 {col 39}{txt}eps = {res}2.44e-02 {txt}{col 55}{txt}iters = {res}4{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -7.12  {txt}    
{txt}{col  0}Iteration 5:{txt}{col 16}deviance = {res}9.6174e+03 {col 39}{txt}eps = {res}4.26e-03 {txt}{col 55}{txt}iters = {res}4{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -7.91  {txt}    
{txt}{col  0}Iteration 6:{txt}{col 16}deviance = {res}9.6103e+03 {col 39}{txt}eps = {res}7.32e-04 {txt}{col 55}{txt}iters = {res}3{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -8.88  {txt}    
{txt}{col  0}Iteration 7:{txt}{col 16}deviance = {res}9.6085e+03 {col 39}{txt}eps = {res}1.92e-04 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -9.88  {txt}    
{txt}{col  0}Iteration 8:{txt}{col 16}deviance = {res}9.6079e+03 {col 39}{txt}eps = {res}6.75e-05 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res}-10.88  {txt}    
{txt}{col  0}Iteration 9:{txt}{col 16}deviance = {res}9.6076e+03 {col 39}{txt}eps = {res}2.48e-05 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {res}-11.88  {txt}    
{txt}{col  0}Iteration 10:{txt}{col 16}deviance = {res}9.6075e+03 {col 39}{txt}eps = {res}9.12e-06 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {res}-12.88  {txt} S  
{txt}{col  0}Iteration 11:{txt}{col 16}deviance = {res}9.6075e+03 {col 39}{txt}eps = {res}3.36e-06 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {res}-13.88  {txt} S  
{txt}{col  0}Iteration 12:{txt}{col 16}deviance = {res}9.6075e+03 {col 39}{txt}eps = {res}1.23e-06 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {err}-14.88  {txt} S  
{txt}{col  0}Iteration 13:{txt}{col 16}deviance = {res}9.6075e+03 {col 39}{txt}eps = {res}4.54e-07 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {err}-15.88  {txt} S  
{txt}{col  0}Iteration 14:{txt}{col 16}deviance = {res}9.6075e+03 {col 39}{txt}eps = {res}1.67e-07 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-07{col 82}{txt} min(eta) = {err}-16.88  {txt} S  
{txt}{col  0}Iteration 15:{txt}{col 16}deviance = {res}9.6075e+03 {col 39}{txt}eps = {res}6.15e-08 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-07{col 82}{txt} min(eta) = {err}-17.88  {txt} S  
{txt}{col  0}Iteration 16:{txt}{col 16}deviance = {res}9.6075e+03 {col 39}{txt}eps = {res}2.26e-08 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-09{col 82}{txt} min(eta) = {err}-18.88  {txt} S  
{txt}{col  0}Iteration 17:{txt}{col 16}deviance = {res}9.6075e+03 {col 39}{txt}eps = {res}8.32e-09 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-09{col 82}{txt} min(eta) = {err}-19.88  {txt} S O
{txt}{hline 108}
{txt}(legend: {res}p{txt}: exact partial-out   {res}s{txt}: exact solver   {res}h{txt}: step-halving   {res}o{txt}: epsilon below tolerance)
{txt}Converged in 17 iterations and 46 HDFE sub-iterations (tol = 1.0e-08)
{res}{txt}
HDFE {help ppmlhdfe##description:PPML} regression{col 51}No. of obs{col 67}={col 69}{res}     2,232
{txt}Absorbing 2 HDFE groups{col 51}Residual df{col 67}={col 69}{res}       190
{txt}Statistics robust to heteroskedasticity{col 51}Wald chi2({res}13{txt}){col 67}={col 69}{res}    151.83
{txt}Deviance{col 22}={col 24}{res} 9607.481445{txt}{col 51}Prob > chi2{col 67}={col 69}{res}    0.0000
{txt}Log pseudolikelihood ={col 24}{res}-7033.509459{txt}{col 51}Pseudo R2{col 67}={col 69}{res}    0.9004
{txt}
Number of clusters ({res}PERMCO{txt}){col 29}={col 31}{res}       191
{txt}{ralign 82:(Std. err. adjusted for {res:191} clusters in {res:PERMCO})}
{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 18}{c |}{col 30}    Robust
{col 1}         npatent{col 18}{c |} Coefficient{col 30}  std. err.{col 42}      z{col 50}   P>|z|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}RDAT {c |}{col 18}{res}{space 2} .0345811{col 30}{space 2} .5431488{col 41}{space 1}    0.06{col 50}{space 3}0.949{col 58}{space 4}-1.029971{col 71}{space 3} 1.099133
{txt}{space 12}lnME {c |}{col 18}{res}{space 2}  .377924{col 30}{space 2} .1570863{col 41}{space 1}    2.41{col 50}{space 3}0.016{col 58}{space 4} .0700404{col 71}{space 3} .6858075
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2}-.0969095{col 30}{space 2} .1872238{col 41}{space 1}   -0.52{col 50}{space 3}0.605{col 58}{space 4}-.4638615{col 71}{space 3} .2700425
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .4078896{col 30}{space 2} .4704605{col 41}{space 1}    0.87{col 50}{space 3}0.386{col 58}{space 4} -.514196{col 71}{space 3} 1.329975
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2} .1312377{col 30}{space 2} .2711648{col 41}{space 1}    0.48{col 50}{space 3}0.628{col 58}{space 4}-.4002354{col 71}{space 3} .6627109
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2} .0351413{col 30}{space 2} .0345553{col 41}{space 1}    1.02{col 50}{space 3}0.309{col 58}{space 4}-.0325858{col 71}{space 3} .1028684
{txt}{space 13}ROA {c |}{col 18}{res}{space 2} .2848552{col 30}{space 2} .6907873{col 41}{space 1}    0.41{col 50}{space 3}0.680{col 58}{space 4}-1.069063{col 71}{space 3} 1.638773
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2} .6617317{col 30}{space 2} .5206084{col 41}{space 1}    1.27{col 50}{space 3}0.204{col 58}{space 4}-.3586419{col 71}{space 3} 1.682105
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2}-.3020768{col 30}{space 2} .5552348{col 41}{space 1}   -0.54{col 50}{space 3}0.586{col 58}{space 4}-1.390317{col 71}{space 3} .7861634
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2} -.003872{col 30}{space 2} .0088358{col 41}{space 1}   -0.44{col 50}{space 3}0.661{col 58}{space 4}-.0211899{col 71}{space 3} .0134458
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2}-.4624769{col 30}{space 2} .4746879{col 41}{space 1}   -0.97{col 50}{space 3}0.330{col 58}{space 4}-1.392848{col 71}{space 3} .4678942
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}  -3.8495{col 30}{space 2} 1.773616{col 41}{space 1}   -2.17{col 50}{space 3}0.030{col 58}{space 4}-7.325722{col 71}{space 3}-.3732771
{txt}oms_HHidx_square {c |}{col 18}{res}{space 2} 2.903154{col 30}{space 2} 1.986196{col 41}{space 1}    1.46{col 50}{space 3}0.144{col 58}{space 4}-.9897191{col 71}{space 3} 6.796026
{txt}{space 11}_cons {c |}{col 18}{res}{space 2}-3.014536{col 30}{space 2} 2.682882{col 41}{space 1}   -1.12{col 50}{space 3}0.261{col 58}{space 4}-8.272888{col 71}{space 3} 2.243816
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 13}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text} Absorbed FE{col 14}{c |} Categories{col 27} - Redundant{col 39}  = Num. Coefs{col 54}{c |}
{res}{col 1}{text}{hline 13}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}      PERMCO{col 14}{c |}{space 1}      191{col 27}{space 1}      191{col 39}{result}{space 1}        0{col 53}{text}*{col 54}{c |}
{res}{col 1}{text}       fyear{col 14}{c |}{space 1}       26{col 27}{space 1}        1{col 39}{result}{space 1}       25{col 53}{text} {col 54}{c |}
{res}{col 1}{text}{hline 13}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
* = FE nested within cluster; treated as redundant for DoF computation
{res}{txt}
{com}.         estimates store ppml_firmfyear
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"

{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"

{com}. 
.         ppmlhdfe `innov_used' `rd_used' `ctrl_w', absorb(i.PERMCO i.fyear#i.sic3) vce(cluster PERMCO) separation("none")
{res}{txt}(dropped 995 {browse "http://scorreia.com/research/singletons.pdf":singleton observations})
{res}{txt}note: 2 variables omitted because of collinearity: {res}oms_HHidx oms_HHidx_square{txt}
{res}{txt}{col  0}Iteration 1:{txt}{col 16}deviance = {res}5.7258e+03 {col 39}{txt}eps = {res}.        {txt}{col 55}{txt}iters = {res}43{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -3.73  {txt}P   
{txt}{col  0}Iteration 2:{txt}{col 16}deviance = {res}2.2775e+03 {col 39}{txt}eps = {res}1.51e+00 {txt}{col 55}{txt}iters = {res}45{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -5.09  {txt}    
{txt}{col  0}Iteration 3:{txt}{col 16}deviance = {res}1.5690e+03 {col 39}{txt}eps = {res}4.52e-01 {txt}{col 55}{txt}iters = {res}47{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -6.50  {txt}    
{txt}{col  0}Iteration 4:{txt}{col 16}deviance = {res}1.3905e+03 {col 39}{txt}eps = {res}1.28e-01 {txt}{col 55}{txt}iters = {res}32{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res} -8.44  {txt}    
{txt}{col  0}Iteration 5:{txt}{col 16}deviance = {res}1.3434e+03 {col 39}{txt}eps = {res}3.51e-02 {txt}{col 55}{txt}iters = {res}35{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res}-10.61  {txt}    
{txt}{col  0}Iteration 6:{txt}{col 16}deviance = {res}1.3294e+03 {col 39}{txt}eps = {res}1.05e-02 {txt}{col 55}{txt}iters = {res}23{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res}-12.33  {txt}    
{txt}{col  0}Iteration 7:{txt}{col 16}deviance = {res}1.3234e+03 {col 39}{txt}eps = {res}4.47e-03 {txt}{col 55}{txt}iters = {res}32{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {res}-14.67  {txt}    
{txt}{col  0}Iteration 8:{txt}{col 16}deviance = {res}1.3214e+03 {col 39}{txt}eps = {res}1.52e-03 {txt}{col 55}{txt}iters = {res}12{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {err}-15.79  {txt}    
{txt}{col  0}Iteration 9:{txt}{col 16}deviance = {res}1.3207e+03 {col 39}{txt}eps = {res}5.69e-04 {txt}{col 55}{txt}iters = {res}6{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {err}-16.81  {txt}    
{txt}{col  0}Iteration 10:{txt}{col 16}deviance = {res}1.3204e+03 {col 39}{txt}eps = {res}2.11e-04 {txt}{col 55}{txt}iters = {res}3{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {err}-18.29  {txt}    
{txt}{col  0}Iteration 11:{txt}{col 16}deviance = {res}1.3203e+03 {col 39}{txt}eps = {res}7.86e-05 {txt}{col 55}{txt}iters = {res}2{col 68}{txt}tol ={res} 1.0e-04{col 82}{txt} min(eta) = {err}-20.29  {txt}    
{txt}{col  0}Iteration 12:{txt}{col 16}deviance = {res}1.3193e+03 {col 39}{txt}eps = {res}7.96e-04 {txt}{col 55}{txt}iters = {res}43{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {err}-22.29  {txt}    
{txt}{col  0}Iteration 13:{txt}{col 16}deviance = {res}1.3192e+03 {col 39}{txt}eps = {res}3.91e-05 {txt}{col 55}{txt}iters = {res}21{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {err}-24.29  {txt}    
{txt}{col  0}Iteration 14:{txt}{col 16}deviance = {res}1.3192e+03 {col 39}{txt}eps = {res}1.52e-05 {txt}{col 55}{txt}iters = {res}14{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {err}-26.29  {txt} S  
{txt}{col  0}Iteration 15:{txt}{col 16}deviance = {res}1.3192e+03 {col 39}{txt}eps = {res}6.60e-06 {txt}{col 55}{txt}iters = {res}10{col 68}{txt}tol ={res} 1.0e-05{col 82}{txt} min(eta) = {err}-28.29  {txt}    
{txt}{col  0}Iteration 16:{txt}{col 16}deviance = {res}1.3189e+03 {col 39}{txt}eps = {res}2.34e-04 {txt}{col 55}{txt}iters = {res}56{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {err}-30.29  {txt} S  
{txt}{col  0}Iteration 17:{txt}{col 16}deviance = {res}1.3188e+03 {col 39}{txt}eps = {res}4.65e-05 {txt}{col 55}{txt}iters = {res}46{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {err}-32.29  {txt}    
{txt}{col  0}Iteration 18:{txt}{col 16}deviance = {res}1.3188e+03 {col 39}{txt}eps = {res}2.27e-06 {txt}{col 55}{txt}iters = {res}30{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {err}-34.29  {txt} S  
{txt}{col  0}Iteration 19:{txt}{col 16}deviance = {res}1.3187e+03 {col 39}{txt}eps = {res}5.07e-05 {txt}{col 55}{txt}iters = {res}52{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {err}-36.29  {txt} S  
{txt}{col  0}Iteration 20:{txt}{col 16}deviance = {res}1.3187e+03 {col 39}{txt}eps = {res}1.99e-07 {txt}{col 55}{txt}iters = {res}25{col 68}{txt}tol ={res} 1.0e-06{col 82}{txt} min(eta) = {err}-38.29  {txt}    
{txt}{col  0}Iteration 21:{txt}{col 16}deviance = {res}1.3187e+03 {col 39}{txt}eps = {res}1.88e-05 {txt}{col 55}{txt}iters = {res}57{col 68}{txt}tol ={res} 1.0e-07{col 82}{txt} min(eta) = {err}-40.29  {txt} S  
{txt}{col  0}Iteration 22:{txt}{col 16}deviance = {res}1.3187e+03 {col 39}{txt}eps = {res}2.60e-08 {txt}{col 55}{txt}iters = {res}26{col 68}{txt}tol ={res} 1.0e-07{col 82}{txt} min(eta) = {err}-42.29  {txt} S  
{txt}{col  0}Iteration 23:{txt}{col 16}deviance = {res}1.3187e+03 {col 39}{txt}eps = {res}6.76e-06 {txt}{col 55}{txt}iters = {res}85{col 68}{txt}tol ={res} 1.0e-08{col 82}{txt} min(eta) = {err}-44.29  {txt} S  
{txt}{col  0}Iteration 24:{txt}{col 16}deviance = {res}1.3187e+03 {col 39}{txt}eps = {res}3.92e-09 {txt}{col 55}{txt}iters = {res}33{col 68}{txt}tol ={res} 1.0e-09{col 82}{txt} min(eta) = {err}-46.29  {txt} S O
{txt}{hline 108}
{txt}(legend: {res}p{txt}: exact partial-out   {res}s{txt}: exact solver   {res}h{txt}: step-halving   {res}o{txt}: epsilon below tolerance)
{txt}Converged in 24 iterations and 778 HDFE sub-iterations (tol = 1.0e-08)
{res}{txt}
HDFE {help ppmlhdfe##description:PPML} regression{col 51}No. of obs{col 67}={col 69}{res}     1,246
{txt}Absorbing 2 HDFE groups{col 51}Residual df{col 67}={col 69}{res}       145
{txt}Statistics robust to heteroskedasticity{col 51}Wald chi2({res}11{txt}){col 67}={col 69}{res}    527.59
{txt}Deviance{col 22}={col 24}{res} 1318.705484{txt}{col 51}Prob > chi2{col 67}={col 69}{res}    0.0000
{txt}Log pseudolikelihood ={col 24}{res}-1973.006088{txt}{col 51}Pseudo R2{col 67}={col 69}{res}    0.9508
{txt}
Number of clusters ({res}PERMCO{txt}){col 29}={col 31}{res}       146
{txt}{ralign 82:(Std. err. adjusted for {res:146} clusters in {res:PERMCO})}
{hline 17}{c TT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{col 18}{c |}{col 30}    Robust
{col 1}         npatent{col 18}{c |} Coefficient{col 30}  std. err.{col 42}      z{col 50}   P>|z|{col 58}     [95% con{col 71}f. interval]
{hline 17}{c +}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{space 12}RDAT {c |}{col 18}{res}{space 2}-.0424943{col 30}{space 2} .3608195{col 41}{space 1}   -0.12{col 50}{space 3}0.906{col 58}{space 4}-.7496875{col 71}{space 3} .6646988
{txt}{space 12}lnME {c |}{col 18}{res}{space 2} .4113025{col 30}{space 2} .0749561{col 41}{space 1}    5.49{col 50}{space 3}0.000{col 58}{space 4} .2643913{col 71}{space 3} .5582138
{txt}{space 6}RD_missing {c |}{col 18}{res}{space 2}-.3558516{col 30}{space 2} .2888702{col 41}{space 1}   -1.23{col 50}{space 3}0.218{col 58}{space 4}-.9220267{col 71}{space 3} .2103236
{txt}{space 11}lnAge {c |}{col 18}{res}{space 2} .0586488{col 30}{space 2} .2908457{col 41}{space 1}    0.20{col 50}{space 3}0.840{col 58}{space 4}-.5113984{col 71}{space 3}  .628696
{txt}{space 11}lnK2L {c |}{col 18}{res}{space 2}-.2013434{col 30}{space 2} .2025094{col 41}{space 1}   -0.99{col 50}{space 3}0.320{col 58}{space 4}-.5982546{col 71}{space 3} .1955677
{txt}{space 10}TobinQ {c |}{col 18}{res}{space 2}-.0014234{col 30}{space 2} .0186145{col 41}{space 1}   -0.08{col 50}{space 3}0.939{col 58}{space 4}-.0379071{col 71}{space 3} .0350603
{txt}{space 13}ROA {c |}{col 18}{res}{space 2}-.1422208{col 30}{space 2} .5437218{col 41}{space 1}   -0.26{col 50}{space 3}0.794{col 58}{space 4}-1.207896{col 71}{space 3} .9234543
{txt}{space 8}Leverage {c |}{col 18}{res}{space 2} .7854574{col 30}{space 2} .6296695{col 41}{space 1}    1.25{col 50}{space 3}0.212{col 58}{space 4}-.4486722{col 71}{space 3} 2.019587
{txt}{space 10}CASHAT {c |}{col 18}{res}{space 2}-.5876123{col 30}{space 2} .5809745{col 41}{space 1}   -1.01{col 50}{space 3}0.312{col 58}{space 4}-1.726301{col 71}{space 3} .5510768
{txt}{space 11}KZidx {c |}{col 18}{res}{space 2}-.0005947{col 30}{space 2} .0049775{col 41}{space 1}   -0.12{col 50}{space 3}0.905{col 58}{space 4}-.0103505{col 71}{space 3}  .009161
{txt}{space 9}InstOwn {c |}{col 18}{res}{space 2} .5348138{col 30}{space 2}  .386537{col 41}{space 1}    1.38{col 50}{space 3}0.166{col 58}{space 4}-.2227849{col 71}{space 3} 1.292412
{txt}{space 7}oms_HHidx {c |}{col 18}{res}{space 2}        0{col 30}{txt}  (omitted)
oms_HHidx_square {c |}{col 18}{res}{space 2}        0{col 30}{txt}  (omitted)
{space 11}_cons {c |}{col 18}{res}{space 2}-.0207507{col 30}{space 2} 3.047386{col 41}{space 1}   -0.01{col 50}{space 3}0.995{col 58}{space 4}-5.993517{col 71}{space 3} 5.952016
{txt}{hline 17}{c BT}{hline 11}{hline 11}{hline 9}{hline 8}{hline 13}{hline 12}
{res}
{txt}Absorbed degrees of freedom:
{res}{col 1}{text}{hline 14}{c TT}{hline 12}{hline 12}{hline 14}{hline 1}{c TRC}
{col 1}{text}  Absorbed FE{col 15}{c |} Categories{col 28} - Redundant{col 40}  = Num. Coefs{col 55}{c |}
{res}{col 1}{text}{hline 14}{c +}{hline 12}{hline 12}{hline 14}{hline 1}{c RT}
{col 1}{text}       PERMCO{col 15}{c |}{space 1}      146{col 28}{space 1}      146{col 40}{result}{space 1}        0{col 54}{text}*{col 55}{c |}
{res}{col 1}{text}   fyear#sic3{col 15}{c |}{space 1}      396{col 28}{space 1}        1{col 40}{result}{space 1}      395{col 54}{text} {col 55}{c |}
{res}{col 1}{text}{hline 14}{c BT}{hline 12}{hline 12}{hline 14}{hline 1}{c BRC}
* = FE nested within cluster; treated as redundant for DoF computation
{res}{txt}
{com}.         estimates store ppml_firmfyear2sic
{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"

{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"

{com}.     estadd local YearxIndustryFE "yes"  

{txt}added macro:
    e(YearxIndustryFE) : "{res:yes}"

{com}.                 
.         *Output the Poisson ad Poisson_FEs table as *.csv file 
.     esttab poisson ppml_firm ppml_firmfyear ppml_firmfyear2sic, s(FirmFE YearFE YearxIndustryFE N) noconstant  star(* 0.10 ** 0.05 *** 0.01)  se(3) ar2 b(3) replace title("Fixed Effects Poisson Model Estimates") mtitle("Poisson" "Poisson_firm" "Poisson_firm_fyear" "Poisson_firm_trend"), using "Fixed_Effects_Poisson_Model_Estimates.csv"         
{res}{txt}{p 0 4 2}
(file {bf}
Fixed_Effects_Poisson_Model_Estimates.csv{rm}
not found)
{p_end}
(output written to {browse  `"Fixed_Effects_Poisson_Model_Estimates.csv"'})

{com}. 
. 
. *--------------------------------------------------------------------------------------------------------
. * Table 22--25: Post-regularization Poisson regression
. 
.         * Define variables of interests (please change accordingly)
.         local innov_used "npatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx  InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         estimates clear
{res}{txt}
{com}. 
.         * Post-regularization Poisson regression
.         qui popoisson `innov_used' `rd_used' , controls(`ctrl_w' i.PERMCO) vce(cluster PERMCO) selection(cv, folds(10)) rseed(1234) coef
{txt}
{com}.         estimates store po_poisso_firm
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"
{res}{txt}
{com}.         
.         qui popoisson `innov_used' `rd_used' , controls(`ctrl_w' i.PERMCO i.fyear) vce(cluster PERMCO) selection(cv, folds(10)) rseed(1234) coef
{txt}
{com}.         estimates store po_poisson_firm_fyear
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"
{res}{txt}
{com}.         
.         qui popoisson `innov_used' `rd_used' , controls(`ctrl_w' i.PERMCO i.fyear#i.sic3) vce(cluster PERMCO) selection(cv, folds(10)) rseed(1234) coef
{txt}
{com}.         estimates store po_poisson_firm_fyear2sic3
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "yes"

{txt}added macro:
    e(YearxIndustryFE) : "{res:yes}"
{res}{txt}
{com}. 
.         *Output the Post-regularization LASSO Poisson table as *.csv file 
.     esttab po_poisso_firm po_poisson_firm_fyear po_poisson_firm_fyear2sic3, s(FirmFE YearFE YearxIndustryFE N N_clust k_controls k_controls_sel) noconstant star(* 0.10 ** 0.05 *** 0.01)  se(3) ar2 b(3) replace title("Post-regularization LASSO Poisson Model Estimates") mtitle("POLPR_firm" "POLPR_firm_fyear" "POLPR_firm_trend"), using "Post_regularization_LASSO_Poisson_Model_Estimates.csv"  
{res}{txt}{p 0 4 2}
(file {bf}
Post_regularization_LASSO_Poisson_Model_Estimates.csv{rm}
not found)
{p_end}
(output written to {browse  `"Post_regularization_LASSO_Poisson_Model_Estimates.csv"'})

{com}. 
. 
. *--------------------------------------------------------------------------------------------------------
. * Table 22--25: Double machine learning Poisson
.         *To save time, we set the cross-fit number (xfold) as 5 in this replicate code.
. 
.         * Define variables of interests
.         estimates clear
{res}{txt}
{com}.         local innov_used "npatent"
{txt}
{com}.         local rd_used "RDAT"
{txt}
{com}.         local ctrl_w "lnME RD_missing lnAge lnK2L TobinQ ROA Leverage CASHAT KZidx  InstOwn oms_HHidx oms_HHidx_square"
{txt}
{com}. 
.         *  Double machine learning LASSO Poisson 
.         qui xpopoisson `innov_used' `rd_used' , controls(`ctrl_w' i.PERMCO) vce(cluster PERMCO) selection(cv, folds(10)) xfolds(5) rseed(1234) coef
{txt}
{com}.         estimates store xpo_poisso_firm
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "no"

{txt}added macro:
             e(YearFE) : "{res:no}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"
{res}{txt}
{com}.         
.         qui xpopoisson `innov_used' `rd_used' , controls(`ctrl_w' i.PERMCO i.fyear) vce(cluster PERMCO) selection(cv, folds(10)) xfolds(5) rseed(1234) coef
{txt}
{com}.         estimates store xpo_poisson_firm_fyear
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "no"

{txt}added macro:
    e(YearxIndustryFE) : "{res:no}"
{res}{txt}
{com}.         
.         qui xpopoisson `innov_used' `rd_used' , controls(`ctrl_w' i.PERMCO i.fyear#i.sic3) vce(cluster PERMCO) selection(cv, folds(10)) xfolds(5) rseed(1234) coef
{txt}
{com}.         estimates store xpo_poisson_firm_fyear2sic3
{res}{txt}
{com}.         estadd local FirmFE "yes"

{txt}added macro:
             e(FirmFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearFE "yes"

{txt}added macro:
             e(YearFE) : "{res:yes}"
{res}{txt}
{com}.     estadd local YearxIndustryFE "yes"

{txt}added macro:
    e(YearxIndustryFE) : "{res:yes}"
{res}{txt}
{com}.   
.         *Output the Double machine learning LASSO Poisson table as *.csv file 
.     esttab xpo_poisso_firm xpo_poisson_firm_fyear xpo_poisson_firm_fyear2sic3, s(FirmFE YearFE YearxIndustryFE N N_clust k_controls k_controls_sel) noconstant star(* 0.10 ** 0.05 *** 0.01)  se(3) ar2 b(3) replace title("DML LASSO Poisson Model Estimates") mtitle("DML_firm" "DML_firm_fyear" "DML_firm_trend"), using "DML_LASSO_Poisson_Model_Estimates.csv"     
{res}{txt}{p 0 4 2}
(file {bf}
DML_LASSO_Poisson_Model_Estimates.csv{rm}
not found)
{p_end}
(output written to {browse  `"DML_LASSO_Poisson_Model_Estimates.csv"'})

{com}. 
. 
. 
. log close
      {txt}name:  {res}<unnamed>
       {txt}log:  {res}F:\Dropbox\RD_PATENT_FE\MissingRDPatent_ML\Replicate_log_MissingRDPatent_ML.smcl
  {txt}log type:  {res}smcl
 {txt}closed on:  {res}19 Jun 2022, 15:20:44
{txt}{.-}
{smcl}
{txt}{sf}{ul off}